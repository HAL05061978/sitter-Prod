
Error: Failed to run sql query: ERROR: 42804: structure of query does not match function result type DETAIL: Returned type character varying(255) does not match expected type text in column 21. CONTEXT: SQL statement "SELECT pcr.id as care_response_id, pcrq.id as care_request_id, pcrq.group_id, g.name as group_name, pcrq.requester_id, p.full_name as requester_name, pcrq.requested_date, pcrq.end_date as requested_end_date, pcrq.start_time, pcrq.end_time, pcrq.notes, pcr.status::TEXT, -- FIXED: Cast VARCHAR to TEXT to match return type pcr.created_at, pcr.reciprocal_date, pcr.reciprocal_start_time, pcr.reciprocal_end_time, pcr.response_notes, pcr.responder_id, rp.full_name as responder_name, pcrq.pet_id, pet.name as pet_name, pcr.reciprocal_pet_id, rpet.name as reciprocal_pet_name FROM pet_care_responses pcr JOIN pet_care_requests pcrq ON pcr.request_id = pcrq.id JOIN groups g ON pcrq.group_id = g.id JOIN profiles p ON pcrq.requester_id = p.id LEFT JOIN profiles rp ON pcr.responder_id = rp.id LEFT JOIN pets pet ON pcrq.pet_id = pet.id LEFT JOIN pets rpet ON pcr.reciprocal_pet_id = rpet.id WHERE pcrq.requester_id = p_requester_id AND pcr.response_type = 'pending' -- FIXED: Only count pending responses (matches child care) AND pcr.status IN ('submitted', 'accepted', 'declined') -- FIXED: Exclude 'pending' status (matches child care) AND pcrq.request_type = 'reciprocal' -- FIXED: Only reciprocal requests (matches child care) ORDER BY pcr.created_at DESC" PL/pgSQL function get_pet_care_responses_for_requester(uuid) line 6 at RETURN QUERY

Note: A limit of 100 was applied to your query. If this was the cause of a syntax error, try selecting "No limit" instead and re-run the query.